<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="com.aptana.editor.common.theme.preferences.ThemePreferencePage"
            id="com.aptana.editor.common.theme.page"
            name="%preferencePage.themes.name">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
       <command
       		categoryId="org.eclipse.ui.category.edit"
            description="%command.filter.description"
            id="com.aptana.editor.common.scripting.commands.FilterThroughCommand"
            name="%command.filter.name">
      </command>
       <command
             categoryId="org.eclipse.ui.category.views"
             defaultHandler="com.aptana.editor.common.internal.commands.ExpandAllHandler"
             description="%command.expandall.description"
             id="com.aptana.editor.commands.ExpandAll"
             name="%command.expandall.name">
       </command>
       <command
             categoryId="org.eclipse.ui.category.views"
             defaultHandler="com.aptana.editor.common.internal.commands.CollapseAllHandler"
             description="%command.collapseall.description"
             id="com.aptana.editor.commands.CollapseAll"
             name="%command.collapseall.name">
       </command>
       <command
             categoryId="org.eclipse.ui.category.views"
             defaultHandler="com.aptana.editor.common.internal.commands.ExpandLevelHandler"
             description="%command.expandLevel.description"
             id="com.aptana.editor.commands.ExpandLevel"
             name="%command.expandLevel.name">
          <commandParameter
                id="level"
                name="%commandParameter.level.name"
                optional="true">
          </commandParameter>
       </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="com.aptana.editor.common.scripting.commands.FilterThroughCommand"
            contextId="org.eclipse.ui.textEditorScope"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="Ctrl+Shift+R">
      </key>
      
      <!-- First we remove the binding for M1-Shift-R from the Open Resource command, then we add M1-T -->
      <key
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Shift+R">
      </key>
      <key
            commandId="org.eclipse.ui.navigate.openResource"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+T">
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandAll"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3++">
      </key>
      <key
            commandId="com.aptana.editor.commands.CollapseAll"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+-">
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+1">
         <parameter
               id="level"
               value="1"></parameter>
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+2">
         <parameter
               id="level"
               value="2">
         </parameter>
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+3">
         <parameter
               id="level"
               value="3">
         </parameter>
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+4">
         <parameter
               id="level"
               value="4">
         </parameter>
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+5">
         <parameter
               id="level"
               value="5">
         </parameter>
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+6">
         <parameter
               id="level"
               value="6">
         </parameter>
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+7">
         <parameter
               id="level"
               value="7">
         </parameter>
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+8">
         <parameter
               id="level"
               value="8">
         </parameter>
      </key>
      <key
            commandId="com.aptana.editor.commands.ExpandLevel"
            contextId="com.aptana.editor.common.outline"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+9">
         <parameter
               id="level"
               value="9">
         </parameter>
      </key>

   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="com.aptana.editor.common.scripting.commands.ShowCommandsMenuHandler"
            id="com.aptana.editor.common.scripting.commands.show"
            name="Show Commands Menu">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="com.aptana.editor.common.scripting.commands.show"
            icon="icons/command.png">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:com.aptana.scripting.menu?after=additions">
         <dynamic
               class="com.aptana.editor.common.scripting.commands.EditorCommandsMenuContributor"
               id="com.aptana.editor.common.dynamic">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activePart">
                  <instanceof
                        value="com.aptana.editor.common.AbstractThemeableEditor">
                  </instanceof>
               </with>
            </visibleWhen>
         </dynamic>
      </menuContribution>
      <menuContribution
            locationURI="popup:com.aptana.scripting.popup.menu?after=commands">
         <dynamic
               class="com.aptana.editor.common.scripting.commands.EditorCommandsMenuContributor"
               id="com.aptana.editor.common.dynamic">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activePart">
                  <instanceof
                        value="com.aptana.editor.common.AbstractThemeableEditor">
                  </instanceof>
               </with>
            </visibleWhen>
         </dynamic>
      </menuContribution>
   </extension>

   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="com.aptana.editor.common.preferences.PreferenceInitializer">
      </initializer>
   </extension>
   <extension
         point="org.eclipse.ui.themes">
      <colorDefinition
            categoryId="org.eclipse.ui.workbenchMisc"
            colorFactory="com.aptana.editor.common.internal.theme.fontloader.FontLoader"
            id="com.aptana.editor.common.internal.theme.fontloader.FontLoader"
            label="FontLoader">
      </colorDefinition>
      <theme
            id="com.aptana.editor.common.theme"
            name="%customThemeName">
         <fontOverride
               id="org.eclipse.jface.textfont"
               value="Inconsolata-regular-14">
            <fontValue
                  os="win32"
                  value="Inconsolata-regular-12">
            </fontValue>
         </fontOverride>
         <fontOverride
               id="org.eclipse.ui.workbench.texteditor.blockSelectionModeFont"
               value="Inconsolata-regular-14">
            <fontValue
                  os="win32"
                  value="Inconsolata-regular-12">
            </fontValue>
         </fontOverride>
      </theme>
      <fontDefinition
            categoryId="org.eclipse.ui.workbenchMisc"
            defaultsTo="org.eclipse.jface.textfont"
            id="com.aptana.explorer.font"
            isEditable="true"
            label="%appExplorerFont.label">
      </fontDefinition>
   </extension>
   <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.eclipse.ui.texteditor.ITextEditor"
            class="com.aptana.editor.common.FindBarDecoratedAdapterFactory">
         <adapter
               type="com.aptana.editor.findbar.api.IFindBarDecorated">
         </adapter>
      </factory>
   </extension>
   <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.eclipse.ui.texteditor.ITextEditor"
            class="com.aptana.editor.common.CommandElementsProviderAdapterFactory">
         <adapter
               type="com.aptana.scripting.keybindings.ICommandElementsProvider">
         </adapter>
      </factory>
   </extension>
   <extension
         point="com.aptana.scripting.loadPaths">
      <loadPath
            name="RadRails Framework Files"
            path="framework/">
      </loadPath>
   </extension>
   <extension
         point="com.aptana.scripting.frameworkFiles">
      <file
            name="ruble/editor.rb">
      </file>
      <file
            name="ruble/theme.rb">
      </file>
      <file
            name="ruble/browser.rb">
      </file>
   </extension>
   <extension
         point="com.aptana.scripting.contextContributors">
      <contributor
            class="com.aptana.editor.common.internal.scripting.EditorContextContributor">
      </contributor>
      <contributor
            class="com.aptana.editor.common.internal.scripting.BrowserContextContributor">
      </contributor>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <wizard
            name="%NewWizards.file"
            icon="$nl$/icons/full/etool16/text.png"
            category="org.eclipse.ui.Basic"
            class="com.aptana.editor.common.internal.scripting.NewFileWizard"
            id="com.aptana.ui.wizards.new.file">
         <description>
            %NewWizards.file.description
         </description>
         <selection
               class="org.eclipse.core.resources.IResource">
         </selection>
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.ui.category.window"
            defaultHandler="com.aptana.editor.common.internal.commands.NextEditorHandler"
            id="com.aptana.editor.NextEditorCommand"
            name="%command.NextEditorNoPrompt">
      </command>
      <command
            categoryId="org.eclipse.ui.category.window"
            defaultHandler="com.aptana.editor.common.internal.commands.PreviousEditorHandler"
            id="com.aptana.editor.PreviousEditorCommand"
            name="%command.PreviousEditorNoPrompt">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="com.aptana.editor.NextEditorCommand"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="CTRL+TAB">
      </key>
      <key
            commandId="com.aptana.editor.PreviousEditorCommand"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="CTRL+SHIFT+TAB">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="com.aptana.editor.common.outline"
            name="%context.outline.name">
      </context>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:org.eclipse.ui.views.ContentOutline?after=additions">
         <command
               commandId="com.aptana.editor.commands.ExpandAll">
         </command>
         <command
               commandId="com.aptana.editor.commands.CollapseAll">
         </command>
         <menu
               label="%menu.expand.label">
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="1">
               <parameter
                     name="level"
                     value="1">
               </parameter>
            </command>
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="2">
               <parameter
                     name="level"
                     value="2">
               </parameter>
            </command>
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="3">
               <parameter
                     name="level"
                     value="3">
               </parameter>
            </command>
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="4">
               <parameter
                     name="level"
                     value="4">
               </parameter>
            </command>
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="5">
               <parameter
                     name="level"
                     value="5">
               </parameter>
            </command>
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="6">
               <parameter
                     name="level"
                     value="6">
               </parameter>
            </command>
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="7">
               <parameter
                     name="level"
                     value="7">
               </parameter>
            </command>
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="8">
               <parameter
                     name="level"
                     value="8">
               </parameter>
            </command>
            <command
                  commandId="com.aptana.editor.commands.ExpandLevel"
                  label="9">
               <parameter
                     name="level"
                     value="9">
               </parameter>
            </command>
         </menu>
      </menuContribution>
   </extension>
</plugin>
